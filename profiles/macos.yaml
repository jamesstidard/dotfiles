- defaults:
    link:
        relink: true
        create: true

- clean: ['~']

- link:
    ~/.ssh/config: configs/ssh/mac.config
    ~/.config/iterm2: configs/iterm2
    ~/.config/karabiner/karabiner.json: configs/karabiner/karabiner.json
    ~/Library/Application Support/org.yanex.marta/conf.marco: configs/marta/conf.marco
    ~/Library/Application Support/org.yanex.marta/favorites.marco: configs/marta/favorites.marco
    ~/Library/Application Support/Sublime Merge/Packages/User: configs/sublime-merge/Packages/User
    ~/Library/Application Support/Code/User/keybindings.json: configs/vscode/User/keybindings-macos.json
    ~/Library/Application Support/Code/User/settings.json: configs/vscode/User/settings.json
    ~/Library/Application Support/Code/User/snippets: configs/vscode/User/snippets
    ~/Library/Application Support/Audio Hijack/Sessions.plist: configs/audio-hijack/Sessions.plist

- shell:
  - which brew || /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

- brewfile:
    file: configs/brew/Brewfile
    stdout: true
    stderr: true
    include: ['tap', 'brew', 'cask', 'mas']

- asdf:
    - plugin: cmake
      url: https://github.com/srivathsanmurali/asdf-cmake.git
      global: 3.16.0
      versions:
        - 3.16.0
    - plugin: golang
      url: https://github.com/kennyp/asdf-golang.git
    - plugin: python
      url: https://github.com/danhper/asdf-python.git
      global: 3.8.0
      versions:
        - 3.8.0
    - plugin: ruby
      url: https://github.com/asdf-vm/asdf-ruby.git
    - plugin: rust
      url: https://github.com/code-lever/asdf-rust.git
    - plugin: nodejs
      url: https://github.com/asdf-vm/asdf-nodejs.git
      global: 13.9.0
      versions:
        - 13.9.0

- shell:
    - [sh configs/macos/defaults.sh, "Setting macOS Defaults"]

- vscodefile:
    file: configs/vscode/extensions.vscodefile
    insiders: false

- shell:
    - grep -qxF '/usr/local/bin/fish' /etc/shells || echo /usr/local/bin/fish | sudo tee -a /etc/shells
    - chsh -s /usr/local/bin/fish
